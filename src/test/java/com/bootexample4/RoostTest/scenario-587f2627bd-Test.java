/*
Test generated by RoostGPT for test testing-integration-test using AI Type Open AI and AI Model gpt-4

{
  background: 'Given the base URL is "http://localhost:8080"',
  rule: null,
  scenario: 'Create my account \n' +
    '    When the client sends a POST request "/accounts" with the accounts_body payload\n' +
    '    Then create an account with the specified informatio\n' +
    '    And verify the account created using GET request for "/me"',
  title: 'Create my account'
}

*/
package com.bootexample4.RoostTest;

import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.response.Response;
import org.junit.jupiter.api.Test;

import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.equalTo;
import static org.junit.jupiter.api.Assertions.assertEquals;

public class CreateMyAccountTest {

    @Test
    public void testCreateMyAccount() {
        // Set the base URL
        RestAssured.baseURI = System.getenv("API_HOST");

        // Define the payload for the POST request
        String payload = "{ \"accounts_body\": \"payload\" }";

        // Define the headers for the request
        String headers = "{ \"Content-Type\": \"application/json\" }";

        // Send a POST request to create the account and validate the response
        Response response = given().contentType(ContentType.JSON)
                .body(payload)
                .when()
                .post("/accounts")
                .then()
                .assertThat()
                .statusCode(200)
                .extract()
                .response();

        // Verify the account was created successfully
        String accountId = response.path("id");
        given().contentType(ContentType.JSON)
                .when()
                .get("/me")
                .then()
                .assertThat()
                .statusCode(200)
                .body("id", equalTo(accountId));

        // Verify the account information in the response
        assertEquals("payload", response.path("accounts_body"));
    }
}
