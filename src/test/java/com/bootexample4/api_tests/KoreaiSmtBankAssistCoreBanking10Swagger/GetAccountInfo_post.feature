# ********RoostGPT********

# Test generated by RoostGPT for test karate_open_testing using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /GetAccountInfo_post for http method type POST 
# RoostTestHash=8a95fbc531
# 
# 

# ********RoostGPT********
Feature: GetAccountInfo API Test Suite
    Description: Test suite to validate GetAccountInfo endpoint for fetching customer account details.

  Background:
    * def urlBase = karate.properties['URL_BASE']
    * url urlBase

  Scenario Outline: Verify successful operation with valid input
    Given path 'GetAccountInfo'
    And header Authorization = '<authorization>'
    And header botId = '<botId>'
    And header accountId = '<accountId>'
    And header X-Auth-token = '<xAuthToken>'
    And header X-CORRELATION-ID = '<correlationId>'
    And request """ 
    { 
        "customerId": <customerId> 
    }
    """
    When method POST
    Then status 200
    And match response == '#object'
    And match response.customerId == '#number'
    And match response.accounts == '#[] #object'
    And match response.accounts[0].accountName == '#string'
    And match response.accounts[0].accountNickname == '#string'
    And match response.accounts[0].accountNumber == '#string'
    And match response.accounts[0].accountType == '#string'
    And match response.accounts[0].status == '#string'
    And match response.accounts[0].currency == '#string'
    And match response.accounts[0].availableBalance == '#number'
    And match response.accounts[0].currentBalance == '#number'
    And match response.accounts[0].minimumBalance == '#string'
    And match response.accounts[0].activatedDate == '#string'
    And match response.accounts[0].deactivatedDate == '#string'
    And match response.accounts[0].lastUpdated == '#string'
    And match response.accounts[0].image == '#string'
    And match response.accounts[0].expiryDate == '#string'
    And match response.accounts[0].personalBankerName == '#string'
    And match response.accounts[0].personalBankerContact == '#object'
    And match response.accounts[0].personalBankerContact.email == '#string'
    And match response.accounts[0].personalBankerContact.mobileNumber == '#string'

    Examples:
      | authorization    | botId  | accountId  | xAuthToken | correlationId | customerId |
      | 'Bearer Token 1' | 'Bot1' | 'Acc12345' | 'Token123' | '10001'       | 1045300    |
      | 'Bearer Token 2' | 'Bot2' | 'Acc67890' | 'Token456' | '10002'       | 1045301    |

  Scenario: Verify authorization failure
    Given path 'GetAccountInfo'
    And header Authorization = ''
    And header botId = 'Bot1'
    And header accountId = 'Acc12345'
    And header X-Auth-token = 'Token123'
    And header X-CORRELATION-ID = '10001'
    And request """
    { 
        "customerId": 1045300 
    }
    """
    When method POST
    Then status 401
    And match response == '#object'
    And match response.err == '#object'
    And match response.err.message == '#string'

  Scenario: Verify not found error
    Given path 'GetAccountInfo'
    And header Authorization = 'Bearer Token 1'
    And header botId = 'Bot1'
    And header accountId = 'Acc99999'
    And header X-Auth-token = 'Token123'
    And header X-CORRELATION-ID = '20001'
    And request """
    { 
        "customerId": 999999 
    }
    """
    When method POST
    Then status 404
    And match response == '#object'
    And match response.err == '#object'
    And match response.err.message == '#string'
