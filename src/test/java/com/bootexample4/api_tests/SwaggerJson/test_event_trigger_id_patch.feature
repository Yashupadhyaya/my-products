# ********RoostGPT********

# Test generated by RoostGPT for test test-roostapispec-1 using AI Type Claude AI and AI Model claude-3-5-sonnet-20240620
# 
# Feature file generated for /test/event/{trigger_id}_patch for http method type PATCH 
# RoostTestHash=1f062a2277
# 
# 

# ********RoostGPT********
Feature: Test GPT Controller - Edit Trigger Event

  Background:
    * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:4010')
    * url urlBase
    * def authToken = karate.properties['AUTH_TOKEN']

  Scenario Outline: Edit Trigger Event Successfully
    Given path '/test/event', trigger_id
    And header Authorization = 'Bearer ' + authToken
    And request
      """
      {
        "status": "#(status)",
        "status_details": "#(status_details)",
        "completion_time": "#(completion_time)",
        "modification_time": "#(modification_time)",
        "test_endpoints": "#(test_endpoints)",
        "test_report": "#(test_report)"
      }
      """
    When method PUT
    Then status 200

    Examples:
      | read('test_event_trigger_id_patch.csv') |

  Scenario: Edit Trigger Event with Invalid Trigger ID
    Given path '/test/event', 'invalid_trigger_id'
    And header Authorization = 'Bearer ' + authToken
    And request
      """
      {
        "status": "active",
        "status_details": "Test",
        "completion_time": "2023-05-17T12:00:00Z",
        "modification_time": "2023-05-17T11:30:00Z",
        "test_endpoints": "/api/v1/test",
        "test_report": "Test report"
      }
      """
    When method PUT
    Then status 404
    And match response contains
      """
      {
        "code": 404,
        "timestamp": "#string",
        "path": "/test/event/invalid_trigger_id",
        "method": "PUT",
        "message": "Not found"
      }
      """
    And match response.timestamp == '#regex \\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.*'

  Scenario: Edit Trigger Event with Missing Required Fields
    Given path '/test/event', 'trigger3'
    And header Authorization = 'Bearer ' + authToken
    And request
      """
      {
        "status": "active"
      }
      """
    When method PUT
    Then status 400

  Scenario: Edit Trigger Event with Invalid Authorization
    Given path '/test/event', 'trigger4'
    And header Authorization = 'Bearer invalid_token'
    And request
      """
      {
        "status": "active",
        "status_details": "Test",
        "completion_time": "2023-05-18T12:00:00Z",
        "modification_time": "2023-05-18T11:30:00Z",
        "test_endpoints": "/api/v1/test",
        "test_report": "Test report"
      }
      """
    When method PUT
    Then status 401
