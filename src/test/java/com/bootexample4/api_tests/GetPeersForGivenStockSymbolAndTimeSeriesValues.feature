# ********RoostGPT********

# Test generated by RoostGPT for test testing-finnhub-integratiopn using AI Type Open AI and AI Model gpt-4
# 
# ROOST_METHOD_HASH=42e8485db9
# ROOST_METHOD_SIG_HASH=d5c655d95c
# 
#  ########## Scenario ########## 
# 
# {
#   feature: 'Feature: Retrieve Peer Stocks and their Time Series Data',
#   background: null,
#   rule: null,
#   scenario: {
#     title: 'Scenario: Get peers for a given stock symbol and their time series values',
#     steps: 'Given an API key $FINNHUB_API_KEY for Finnhub \n' +
#       'And an API key $ALPHAVANTAGE_API_KEY for AlphaVantage\n' +
#       "And a stock symbol '<SYMBOL>'\n" +
#       "When I retrieve the peer stock symbols from 'https://finnhub.io/api/v1/stock/peers' with the API key\n" +
#       'Then I should get a list of peer stock symbols\n' +
#       "When I retrieve the time series values for each peer stock symbol from 'https://www.alphavantage.co/query' with the API key\n" +
#       'Then I should get the time series data for each peer stock symbol',
#     examples: 'Examples:\n    | SYMBOL | \n    | AAPL |'
#   }
# }
# 

# ********RoostGPT********
Feature: Retrieve Peer Stocks and their Time Series Data

  Background:
    * def ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_URL = karate.properties['ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_URL'] || karate.get('ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_URL', 'http://localhost:4010')
    * def FINNHUB_E706FCCD58_URL = karate.properties['FINNHUB_E706FCCD58_URL'] || karate.get('FINNHUB_E706FCCD58_URL', 'http://localhost:4010')
    * def ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_AUTH_TOKEN = karate.properties['ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_AUTH_TOKEN'] || karate.get('ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_AUTH_TOKEN', 'Bearer_Dummy_Token')
    * def FINNHUB_E706FCCD58_AUTH_TOKEN = karate.properties['FINNHUB_E706FCCD58_AUTH_TOKEN'] || karate.get('FINNHUB_E706FCCD58_AUTH_TOKEN', 'Bearer_Dummy_Token')

  Scenario Outline: Get peers for a given stock symbol and their time series values
    * def SYMBOL = '<SYMBOL>'
    # Finnhub API Call
    * url FINNHUB_E706FCCD58_URL
    And path '/stock/peers'
    And param symbol = SYMBOL
    And header Authorization = FINNHUB_E706FCCD58_AUTH_TOKEN
    When method get
    Then status 200
    And match response == '#array'
    * def peer_stocks = response
    # AlphaVantage API Call
    * url ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_URL
    And path '/query'
    And param symbol = SYMBOL
    And header Authorization = ALPHAVANTAGE_GET_RESOLVED_8BEF8E59C6_AUTH_TOKEN
    When method get
    Then status 200
    And match response != null
    * def time_series_data = response

    Examples:
      | SYMBOL |
      | 'AAPL' |
