# Test generated by RoostGPT for test demo56 using AI Type Azure Open AI and AI Model roost-gpt


  Please regenerate the following artillery test case, as the generated yaml file is not a valid yaml due to following error :
  ERRORS:
  config:
  target: "http://dummyapi.com"
  phases:
    - duration: 10
      arrivalRate: 10
  defaults:
    headers:
      Content-Type: "application/json"
  global:
    beforeRequest: "function (requestParams, context, ee, next) { requestParams.headers['Authorization'] = 'Bearer ' + context.vars.token; return next(); }"

scenarios:
  - name: "Successful API request"
    flow:
      - post:
          url: "/api/endpoint"
          json:
            payload:
              id: 1
              name: "Product A"
              price: 10.99
          capture:
            response:
              status: "responseStatus"

      - think: 1

      - get:
          url: "/api/endpoint/{{ response.payload.id }}"
          capture:
            response:
              status: "responseStatus"
              body: "responseBody"

      - think: 2

      - delete:
          url: "/api/endpoint/{{ response.payload.id }}"
          capture:
            response:
              status: "responseStatus"

      - think: 3

      - beforeRequest: "function (requestParams, context, ee, next) { context.vars.token = 'your-token'; return next(); }"
      - set:
          responseStatus: 200
          responseBody: "{\"message\":\"Product deleted successfully.\"}"

      - assert:
          - "responseStatus": 200
          - "responseBody.message": "Product deleted successfully."

  - name: "API request with validation failure"
    flow:
      - post:
          url: "/api/endpoint"
          json:
            payload:
              name: "Product B"
              price: 5.99
          capture:
            response:
              status: "responseStatus"
              body: "responseBody"

      - think: 1

      - assert:
          - "responseStatus": 400
          - "responseBody.error": "Missing required field: id"

  - name: "API request with edge case"
    flow:
      - post:
          url: "/api/endpoint"
          json:
            payload:
              id: 1
              name: "Product C"
              price: 99.99
          capture:
            response:
              status: "responseStatus"
              body: "responseBody"

      - think: 1

      - assert:
          - "responseStatus": [200, 201]
          - "responseBody": {"id": 1, "name": "Product C", "price": 99.99}

  - name: "API request with non-existent resource"
    flow:
      - delete:
          url: "/api/endpoint/999"
          capture:
            response:
              status: "responseStatus"

      - think: 1

      - assert:
          - "responseStatus": 404
          - "responseBody.error": "Resource not found"

  TEST CASE:
  