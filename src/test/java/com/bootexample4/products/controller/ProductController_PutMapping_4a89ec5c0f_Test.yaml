# Test generated by RoostGPT for test demo56 using AI Type Azure Open AI and AI Model roost-gpt

config:
  target: "http://dummy-api-endpoint.com"

scenarios:
- name: 'Successful API request'
  beforeRequest:
    - set:
        payload: {"name": "Test Product", "description": "Test Description", "price": 10.99}
        headers:
          Content-Type: "application/json"
  request:
    method: "PUT"
    url: "/{id}"
    headers: "{{ headers }}"
    json: true
    body: "{{ payload }}"
  expect:
    - statusCode: 200
    - bodyContains: "Successfully updated product"

- name: 'API request with validation failure'
  beforeRequest:
    - set:
        payload: {"name": ""}
        headers:
          Content-Type: "application/json"
  request:
    method: "PUT"
    url: "/{id}"
    headers: "{{ headers }}"
    json: true
    body: "{{ payload }}"
  expect:
    - statusCode: 400
    - bodyContains: "Validation failed. Missing required field: name"

- name: 'API request with edge case'
  beforeRequest:
    - set:
        payload: {"name": "<script>alert('XSS')</script>", "description": "Lorem ipsum dolor sit amet...", "price": 9999.99}
        headers:
          Content-Type: "application/json"
  request:
    method: "PUT"
    url: "/{id}"
    headers: "{{ headers }}"
    json: true
    body: "{{ payload }}"
  expect:
    - statusCode: 200
    - bodyMatches: "Updated product: Test Product"

